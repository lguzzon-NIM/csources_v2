/* Generated by Nim Compiler v1.9.0 */
#define NIM_INTBITS 32

#include "nimbase.h"
#include <string.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
#define nimfr_(x, y)
#define nimln_(x, y)
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyObject_WIN32_FIND_DATA__aYwmSz9bIz0JHAL9ciwIrnhA tyObject_WIN32_FIND_DATA__aYwmSz9bIz0JHAL9ciwIrnhA;
typedef struct tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A;
typedef struct tyTuple__UV3llMMYFckfui8YMBuUZA tyTuple__UV3llMMYFckfui8YMBuUZA;
struct NimStrPayload {
NI cap;
NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
NI len;
NimStrPayload* p;
};
struct tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A {
NI bytes;
NI16* data;
};
typedef N_STDCALL_PTR(NI, tyProc__3DGKXZ0P9ck0FlUFCwnVxaQ) (NI16* lpFileName, tyObject_WIN32_FIND_DATA__aYwmSz9bIz0JHAL9ciwIrnhA* lpFindFileData);
typedef NI16 tyUncheckedArray__Tyd4y3haUOOHTj71TPIRag[1];
typedef N_STDCALL_PTR(NI32, tyProc__5sqIMptsyAfPn3c9cPj4DOA) (NI16* lpFileName);
typedef N_STDCALL_PTR(NI32, tyProc__29cQilB9cqahn5yPQZH66TkA) (NI16* lpExistingFileName, NI16* lpNewFileName, NI32 flags);
struct tyTuple__UV3llMMYFckfui8YMBuUZA {
NimStringV2 Field0;
NimStringV2 Field1;
};
static N_INLINE(void, nimZeroMem)(void* p, NI size);
static N_INLINE(void, nimSetMem__systemZmemory_7)(void* a, int v, NI size);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
static N_INLINE(NI16*, toWideCString__stdZwidestrs_41)(tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A x);
N_LIB_PRIVATE N_NIMCALL(tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A, newWideCString__stdZwidestrs_287)(NimStringV2 s);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___stdZwidestrs_6)(tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A* a);
N_LIB_PRIVATE N_NIMCALL(NI32, osLastError__stdZoserrors_89)(void);
N_LIB_PRIVATE N_NOINLINE(void, raiseOSError__stdZoserrors_86)(NI32 errorCode, NimStringV2 additionalInfo);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___stdZprivateZoscommon_71)(tyTuple__UV3llMMYFckfui8YMBuUZA x);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___stdZassertions_13)(NimStringV2* dest);
extern NIM_BOOL nimInErrorMode__system_3980;
extern tyProc__3DGKXZ0P9ck0FlUFCwnVxaQ Dl_1442840828_;
extern tyProc__5sqIMptsyAfPn3c9cPj4DOA Dl_1442840841_;
extern tyProc__29cQilB9cqahn5yPQZH66TkA Dl_1442840853_;
static N_INLINE(void, nimSetMem__systemZmemory_7)(void* a, int v, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a, v, ((size_t) (size)));
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (NIM_BOOL*)0;
	result = (&nimInErrorMode__system_3980);
	return result;
}
static N_INLINE(void, nimZeroMem)(void* p, NI size) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimSetMem__systemZmemory_7(p, ((int)0), size);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(NI16*, toWideCString__stdZwidestrs_41)(tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A x) {
	NI16* result;
	result = (NI16*)0;
	result = x.data;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, findFirstFile__stdZprivateZoscommon_25)(NimStringV2 a, tyObject_WIN32_FIND_DATA__aYwmSz9bIz0JHAL9ciwIrnhA* b) {
	NI result;
	tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A colontmpD_;
	NI16* T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A));
	colontmpD_ = newWideCString__stdZwidestrs_287(a);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T1_ = (NI16*)0;
	T1_ = toWideCString__stdZwidestrs_41(colontmpD_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	result = Dl_1442840828_(T1_, b);
	eqdestroy___stdZwidestrs_6((&colontmpD_));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, nosfileExists)(NimStringV2 filename) {
	NIM_BOOL result;
	tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A colontmpD_;
	NI32 a;
	NI16* T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A));
	colontmpD_ = newWideCString__stdZwidestrs_287(filename);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T1_ = (NI16*)0;
	T1_ = toWideCString__stdZwidestrs_41(colontmpD_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	a = Dl_1442840841_(T1_);
	{
		if (!!((a == ((NI32)-1)))) goto LA4_;
		result = ((NI32)(a & ((NI32)16)) == ((NI32)0));
	}
	LA4_: ;
	eqdestroy___stdZwidestrs_6((&colontmpD_));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, nosdirExists)(NimStringV2 dir) {
	NIM_BOOL result;
	tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A colontmpD_;
	NI32 a;
	NI16* T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A));
	colontmpD_ = newWideCString__stdZwidestrs_287(dir);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T1_ = (NI16*)0;
	T1_ = toWideCString__stdZwidestrs_41(colontmpD_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	a = Dl_1442840841_(T1_);
	{
		if (!!((a == ((NI32)-1)))) goto LA4_;
		result = !(((NI32)(a & ((NI32)16)) == ((NI32)0)));
	}
	LA4_: ;
	eqdestroy___stdZwidestrs_6((&colontmpD_));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, tryMoveFSObject__stdZprivateZoscommon_61)(NimStringV2 source, NimStringV2 dest, NIM_BOOL isDir) {
	NIM_BOOL result;
	tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A s;
	tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A d;
	NI16* T2_;
	NI16* T3_;
	NI32 T4_;
NIM_BOOL oldNimErrFin1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	nimZeroMem((void*)(&s), sizeof(tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A));
	nimZeroMem((void*)(&d), sizeof(tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A));
	s = newWideCString__stdZwidestrs_287(source);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	d = newWideCString__stdZwidestrs_287(dest);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T2_ = (NI16*)0;
	T2_ = toWideCString__stdZwidestrs_41(s);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T3_ = (NI16*)0;
	T3_ = toWideCString__stdZwidestrs_41(d);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	T4_ = (NI32)0;
	T4_ = Dl_1442840853_(T2_, T3_, ((NI32)3));
	result = !((T4_ == ((NI32)0)));
	{
		NI32 err;
		NIM_BOOL isAccessDeniedError;
		NIM_BOOL T9_;
		if (!!(result)) goto LA7_;
		err = osLastError__stdZoserrors_89();
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		T9_ = (NIM_BOOL)0;
		T9_ = isDir;
		if (!(T9_)) goto LA10_;
		T9_ = (err == ((NI32)5));
		LA10_: ;
		isAccessDeniedError = T9_;
		{
			NimStringV2 colontmpD_;
			tyTuple__UV3llMMYFckfui8YMBuUZA T16_;
			if (!!(isAccessDeniedError)) goto LA13_;
			colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
			T16_.Field0 = source;
			T16_.Field1 = dest;
			colontmpD_ = dollar___stdZprivateZoscommon_71(T16_);
			if (NIM_UNLIKELY(*nimErr_)) goto LA15_;
			raiseOSError__stdZoserrors_86(err, colontmpD_);
			if (NIM_UNLIKELY(*nimErr_)) goto LA15_;
			{
				LA15_:;
			}
			{
				eqdestroy___stdZassertions_13((&colontmpD_));
			}
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		}
		LA13_: ;
	}
	LA7_: ;
	{
		LA1_:;
	}
	{
		oldNimErrFin1_ = *nimErr_; *nimErr_ = NIM_FALSE;
		eqdestroy___stdZwidestrs_6((&d));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		eqdestroy___stdZwidestrs_6((&s));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		*nimErr_ = oldNimErrFin1_;
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, nossymlinkExists)(NimStringV2 link) {
	NIM_BOOL result;
	tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A colontmpD_;
	NI32 a;
	NI16* T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_WideCStringObj__BwbUsAz4qeNPsD7q6SJ32A));
	colontmpD_ = newWideCString__stdZwidestrs_287(link);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T1_ = (NI16*)0;
	T1_ = toWideCString__stdZwidestrs_41(colontmpD_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	a = Dl_1442840841_(T1_);
	{
		if (!!((a == ((NI32)-1)))) goto LA4_;
		result = !(((NI32)(a & ((NI32)1024)) == ((NI32)0)));
	}
	LA4_: ;
	eqdestroy___stdZwidestrs_6((&colontmpD_));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
